!function(a,b,c,d){"use strict";a.fn.simpleLightbox=function(d){var e,d=a.extend({sourceAttr:"href",overlay:!0,spinner:!0,nav:!0,navText:["&lsaquo;","&rsaquo;"],captions:!0,captionDelay:0,captionSelector:"img",captionType:"attr",captionsData:"title",captionPosition:"bottom",captionClass:"",close:!0,closeText:"Ã—",swipeClose:!0,showCounter:!0,fileExt:"png|jpg|jpeg|gif",animationSlide:!0,animationSpeed:250,preloading:!0,enableKeyboard:!0,loop:!0,rel:!1,docClose:!0,swipeTolerance:50,className:"simple-lightbox",widthRatio:.8,heightRatio:.9,disableRightClick:!1,disableScroll:!0,alertError:!0,alertErrorMessage:"Image not found, next image will be loaded",additionalHtml:!1,history:!0},d),f=(b.navigator.pointerEnabled||b.navigator.msPointerEnabled,0),g=0,h=a(),i=function(){var a=c.body||c.documentElement;return a=a.style,""===a.WebkitTransition?"-webkit-":""===a.MozTransition?"-moz-":""===a.OTransition?"-o-":""===a.transition&&""},j=!1,k=[],l=d.rel&&!1!==d.rel?function(b,c){return a(c.selector).filter(function(){return a(this).attr("rel")===b})}(d.rel,this):this,m=0,n=!1!==(i=i()),o="pushState"in history,p=!1,q=b.location,r=function(){return q.hash.substring(1)},s=r(),t=function(){r();var a="pid="+(D+1),b=q.href.split("#")[0]+"#"+a;o?history[p?"replaceState":"pushState"]("",c.title,b):p?q.replace(b):q.hash=a,p=!0},u=function(){o?history.pushState("",c.title,q.pathname+q.search):q.hash="",clearTimeout(e)},v=function(){p?e=setTimeout(t,800):t()},w="simplelb",x=a("<div>").addClass("sl-overlay"),y=a("<button>").addClass("sl-close").html(d.closeText),z=a("<div>").addClass("sl-spinner").html("<div></div>"),A=a("<div>").addClass("sl-navigation").html('<button class="sl-prev">'+d.navText[0]+'</button><button class="sl-next">'+d.navText[1]+"</button>"),B=a("<div>").addClass("sl-counter").html('<span class="sl-current"></span>/<span class="sl-total"></span>'),C=!1,D=0,E=a("<div>").addClass("sl-caption "+d.captionClass+" pos-"+d.captionPosition),F=a("<div>").addClass("sl-image"),G=a("<div>").addClass("sl-wrapper").addClass(d.className),H=function(b){if(!d.fileExt)return!0;var c=/\.([0-9a-z]+)(?=[?#])|(\.)(?:[\w]+)$/gim,e=a(b).attr(d.sourceAttr).match(c);return e&&"a"==a(b).prop("tagName").toLowerCase()&&new RegExp(".("+d.fileExt+")$","i").test(e)},I=function(b){b.trigger(a.Event("show.simplelightbox")),d.disableScroll&&(m=R("hide")),G.appendTo("body"),F.appendTo(G),d.overlay&&x.appendTo(a("body")),C=!0,D=l.index(b),h=a("<img/>").hide().attr("src",b.attr(d.sourceAttr)),-1==k.indexOf(b.attr(d.sourceAttr))&&k.push(b.attr(d.sourceAttr)),F.html("").attr("style",""),h.appendTo(F),M(),x.fadeIn("fast"),a(".sl-close").fadeIn("fast"),z.show(),A.fadeIn("fast"),a(".sl-wrapper .sl-counter .sl-current").text(D+1),B.fadeIn("fast"),J(),d.preloading&&O(),setTimeout(function(){b.trigger(a.Event("shown.simplelightbox"))},d.animationSpeed)},J=function(c){if(h.length){var e=new Image,f=a(b).width()*d.widthRatio,g=a(b).height()*d.heightRatio;e.src=h.attr("src"),a(e).bind("error",function(b){l.eq(D).trigger(a.Event("error.simplelightbox")),C=!1,j=!0,z.hide(),d.alertError&&alert(d.alertErrorMessage),P(1==c||-1==c?c:1)}),e.onload=function(){void 0!==c&&l.eq(D).trigger(a.Event("changed.simplelightbox")).trigger(a.Event((1===c?"nextDone":"prevDone")+".simplelightbox")),d.history&&v(),-1==k.indexOf(h.attr("src"))&&k.push(h.attr("src"));var i=e.width,o=e.height;if(i>f||o>g){var p=i/o>f/g?i/f:o/g;i/=p,o/=p}a(".sl-image").css({top:(a(b).height()-o)/2+"px",left:(a(b).width()-i-m)/2+"px"}),z.hide(),h.css({width:i+"px",height:o+"px"}).fadeIn("fast"),j=!0;var q,r="self"==d.captionSelector?l.eq(D):l.eq(D).find(d.captionSelector);if(q="data"==d.captionType?r.data(d.captionsData):"text"==d.captionType?r.html():r.prop(d.captionsData),d.loop||(0===D&&a(".sl-prev").hide(),D>=l.length-1&&a(".sl-next").hide(),D>0&&a(".sl-prev").show(),D<l.length-1&&a(".sl-next").show()),1==l.length&&a(".sl-prev, .sl-next").hide(),1==c||-1==c){var s={opacity:1};d.animationSlide&&(n?(L(0,100*c+"px"),setTimeout(function(){L(d.animationSpeed/1e3,"0px")},50)):s.left=parseInt(a(".sl-image").css("left"))+100*c+"px"),a(".sl-image").animate(s,d.animationSpeed,function(){C=!1,K(q)})}else C=!1,K(q);d.additionalHtml&&0===a(".sl-additional-html").length&&a("<div>").html(d.additionalHtml).addClass("sl-additional-html").appendTo(a(".sl-image"))}}},K=function(b){""!==b&&void 0!==b&&d.captions&&E.html(b).hide().appendTo(a(".sl-image")).delay(d.captionDelay).fadeIn("fast")},L=function(b,c){var d={};d[i+"transform"]="translateX("+c+")",d[i+"transition"]=i+"transform "+b+"s linear",a(".sl-image").css(d)},M=function(){a(b).on("resize."+w,J),a(c).on("click.simplelb touchstart."+w,".sl-close",function(a){a.preventDefault(),j&&Q()}),d.history&&setTimeout(function(){a(b).on("hashchange."+w,function(){j&&r()===s&&Q()})},40),A.on("click."+w,"button",function(b){b.preventDefault(),f=0,P(a(this).hasClass("sl-next")?1:-1)});var e=0,h=0,i=0,k=0,m=!1,o=0;F.on("touchstart.simplelb mousedown."+w,function(a){return!!m||(n&&(o=parseInt(F.css("left"))),m=!0,e=a.originalEvent.pageX||a.originalEvent.touches[0].pageX,i=a.originalEvent.pageY||a.originalEvent.touches[0].pageY,!1)}).on("touchmove.simplelb mousemove.simplelb pointermove MSPointerMove",function(a){if(!m)return!0;a.preventDefault(),h=a.originalEvent.pageX||a.originalEvent.touches[0].pageX,k=a.originalEvent.pageY||a.originalEvent.touches[0].pageY,f=e-h,g=i-k,d.animationSlide&&(n?L(0,-f+"px"):F.css("left",o-f+"px"))}).on("touchend.simplelb mouseup.simplelb touchcancel.simplelb mouseleave.simplelb pointerup pointercancel MSPointerUp MSPointerCancel",function(a){if(m){m=!1;var b=!0;d.loop||(0===D&&f<0&&(b=!1),D>=l.length-1&&f>0&&(b=!1)),Math.abs(f)>d.swipeTolerance&&b?P(f>0?1:-1):d.animationSlide&&(n?L(d.animationSpeed/1e3,"0px"):F.animate({left:o+"px"},d.animationSpeed/2)),d.swipeClose&&Math.abs(g)>50&&Math.abs(f)<d.swipeTolerance&&Q()}})},N=function(){A.off("click","button"),a(c).off("click."+w,".sl-close"),a(b).off("resize."+w),a(b).off("hashchange."+w)},O=function(){var b=D+1<0?l.length-1:D+1>=l.length-1?0:D+1,c=D-1<0?l.length-1:D-1>=l.length-1?0:D-1;a("<img />").attr("src",l.eq(b).attr(d.sourceAttr)).on("load",function(){-1==k.indexOf(a(this).attr("src"))&&k.push(a(this).attr("src")),l.eq(D).trigger(a.Event("nextImageLoaded.simplelightbox"))}),a("<img />").attr("src",l.eq(c).attr(d.sourceAttr)).on("load",function(){-1==k.indexOf(a(this).attr("src"))&&k.push(a(this).attr("src")),l.eq(D).trigger(a.Event("prevImageLoaded.simplelightbox"))})},P=function(b){l.eq(D).trigger(a.Event("change.simplelightbox")).trigger(a.Event((1===b?"next":"prev")+".simplelightbox"));var c=D+b;if(!(C||(c<0||c>=l.length)&&!1===d.loop)){D=c<0?l.length-1:c>l.length-1?0:c,a(".sl-wrapper .sl-counter .sl-current").text(D+1);var e={opacity:0};d.animationSlide&&(n?L(d.animationSpeed/1e3,-100*b-f+"px"):e.left=parseInt(a(".sl-image").css("left"))+-100*b+"px"),a(".sl-image").animate(e,d.animationSpeed,function(){setTimeout(function(){var c=l.eq(D);h.attr("src",c.attr(d.sourceAttr)),-1==k.indexOf(c.attr(d.sourceAttr))&&z.show(),a(".sl-caption").remove(),J(b),d.preloading&&O()},100)})}},Q=function(){if(!C){var b=l.eq(D),c=!1;b.trigger(a.Event("close.simplelightbox")),d.history&&u(),a(".sl-image img, .sl-overlay, .sl-close, .sl-navigation, .sl-image .sl-caption, .sl-counter").fadeOut("fast",function(){d.disableScroll&&R("show"),a(".sl-wrapper, .sl-overlay").remove(),N(),c||b.trigger(a.Event("closed.simplelightbox")),c=!0}),h=a(),j=!1,C=!1}},R=function(d){var e=0;if("hide"==d){var f=b.innerWidth;if(!f){var g=c.documentElement.getBoundingClientRect();f=g.right-Math.abs(g.left)}if(c.body.clientWidth<f){var h=c.createElement("div"),i=parseInt(a("body").css("padding-right"),10);h.className="sl-scrollbar-measure",a("body").append(h),e=h.offsetWidth-h.clientWidth,a(c.body)[0].removeChild(h),a("body").data("padding",i)}}return e};return d.close&&y.appendTo(G),d.showCounter&&l.length>1&&(B.appendTo(G),B.find(".sl-total").text(l.length)),d.nav&&A.appendTo(G),d.spinner&&z.appendTo(G),l.on("click."+w,function(b){if(H(this)){if(b.preventDefault(),C)return!1;I(a(this))}}),a(c).on("click.simplelb touchstart."+w,function(b){j&&d.docClose&&0===a(b.target).closest(".sl-image").length&&0===a(b.target).closest(".sl-navigation").length&&Q()}),d.disableRightClick&&a(c).on("contextmenu",".sl-image img",function(a){return!1}),d.enableKeyboard&&a(c).on("keyup."+w,function(a){if(f=0,j){a.preventDefault();var b=a.keyCode;27==b&&Q(),37!=b&&39!=a.keyCode||P(39==a.keyCode?1:-1)}}),this.open=function(b){b=b||a(this[0]),I(b)},this.next=function(){P(1)},this.prev=function(){P(-1)},this.close=function(){Q()},this.destroy=function(){a(c).unbind("click."+w).unbind("keyup."+w),Q(),a(".sl-overlay, .sl-wrapper").remove(),this.off("click")},this.refresh=function(){this.destroy(),a(this).simpleLightbox(d)},this}}(jQuery,window,document);